<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Описание языка разметки шаблонизатора</title>
<link rel="stylesheet" href="man_styles.css" type="text/css">
</head>

<body>
<h1>Описание языка шаблонов</h1>

<p>Теги шаблонов пишутся в фигурных скобках, например: {NAME}.
<p>В каждом параметре можно использовать символы кроме: Фигурных скобок ({}), и одинарных кавычек (').
<p>Если в каком-то параметре требуются пробелы или служебные символы типа фигурных скобок, то они должны быть взяты в одинарные кавычки ('). Например: {one 'это второй параметр и }-скобка в нем'}
<p>В квадратных ([]) скобках представлены необязательные параметры, а также через прямую (|) черту их возможные варианты. Значения поумолчанию данных параметров представлены в описании.
<p>Если нужно пропустить указание какого-либо необязательного параметра (оставить значение поумолчанию), то его просто не нужно указывать вообще. Однако если нужно задать какой-то параметр после него, то вместо него нужно просто поставить пустое значение - двойные кавычки ("") или одинарные кавычки ('') чтобы не менялись места.

<table border=1 width=95% align=center>
<caption>На данный момент определены следующие теги:</caption>
	<tr>
		<th>{_ комментарии}
		<td>Просто комментарии шаблона, его структуры. В итоговом документе будут отсутствовать. ВНИМАНИЕ!: В комментарии может быть не больше 6 отдельных слов! (если нужно больше, то просто используйте любой алфавитный символ (например _) вместо пробела)
	<tr>
		<td colspan=2><hr>
	<tr>
		<th width=1>{VAR}
		<td>Заменяет переменную VAR на ее значение. Имя переменной произвольно. Разрешено обращение по ключу: {VAR[name]}, {VAR[0]}. Закрывающий тег отсутствует.
	<tr>
		<th width=1>{set VAR_name VAR_value}
		<td>Создается переменная <i>VAR_name</i> и ей устанавливается значение <i>VAR_value</i>. В результирующем файле будет просто вырезано. Когда переменная уже существует генерируется WARNING.
	<tr>
		<td colspan=2><hr>
	<tr>
		<th>{include_file filename [tmpl|php]}
		<td>Включает указанный файл. filename - относительный путь к файлу включения. Параметры: <i>tmpl</i> - парсить включаемый файл как шаблон, <i>php</i> - парсить включаемый файл на PHP. Поумолчанию никак не парсится, включается "как есть". Можно без скобок. Закрывающий тег отсутствует.
	<tr>
		<td colspan=2><hr>
	<tr>
		<th>{cycle ...}
		<td>Используется для задания нескольких проходов конкретного участка кода, есть несколько вариантов использования
	<tr>
		<th class=padd>{cycle foreach VAR<sup>1</sup> [as var_name]}
		<td>Выполняет итерацию по всем элементам массива VAR и выводит соответствующее содержание заклеченное между открывающим и закрывающим тегами. Требуется закрывающий тег {/cycle [VAR]}<sup>2</sup>. Если присутствует необязательное <i>as var_name</i> то переменная в цикле будет доступна с именем var_name.
	<tr>
		<th class=padd>{cycle for VAR from<sup>3</sup> to<sup>3</sup> steep<sup>3</sup>}
		<td>Выполняет итерацию со счетчиком VAR. Требуется закрывающий тег {/cycle [VAR]}<sup>2</sup>. Параметры (все числовые): <i>from</i> - начальное значение счетчика VAR. <i>to</i> - конечное значение счетчика. <i>steep</i> - шаг увеличения счетчика (в случае обратного счета м.б. отрицательным). Если не указан или 0, принимается поумолчанию равным 1.
	<tr>
		<th class=padd>{cycle sql VAR}
		<td>Выполняет итерацию по всем элементам результата запроса к БД. VAR - переменная-ресурс запроса. Требуется закрывающий тег {/cycle [VAR]}<sup>2</sup>
	<tr>
		<th class=padd><a name=cycle_distrib>{cycle distrib VAR [sql|array] [fill]}</a>
		<td>Распределяет элементы массива VAR матричным способом. Удобно использовать при автоматическом разбиении на строки и ячейки в таблице. Количество элементов в строке, а также содержимое указывается в теге <a href=>{distrib}</a>. <i>sql</i> - При указании этого параметра VAR рассматривается как ресурс результата выборки из БД. <i>array</i> VAR рассматривается как массив. Необязательный параметр, поумолчанию array. <i>fill</i> - заполнитель недостающих элементов для приведения к квадратному виду, необязательный параметр.
	<tr>
		<th class=paddx2>{distrib VAR число}
		<td>Тег, должен быть обязательно вложен в <a href=cycle_distrib>{cycle distrib VAR}{/cycle VAR}</a>.
			<br>Число указывает на количество элементов в строке, а также содержимое является элементом матрицы.
	<tr>
		<td colspan=2><hr>
	<tr>
		<th>{esli условие<sup><b>3</b></sup>}
			<br>&nbsp;&nbsp;Инструкции если истина
			<br>&nbsp;&nbsp;{else<sup>4</sup>}Инструкции если ложь
			<br>{/esli условие<sup>5</sup>}
			<td>Используется для условного ветвления. Условие это любое выражение, которое будет вычисляться в значение ИСТИНА(TRUE) или ЛОЖЬ(FALSE).  Требует закрывающего тега. Обязательно должен в себе содержать тег {then} и опционально {else}.
			<br><b>Внимание!</b> При использовании в условии переменных, перед их именем <u>необходимо</u> поставить знак $ (доллар)! (например: {esli $AGE&gt;20}...)
	<tr>
		<td colspan=2><hr>
	<tr>
		<th><a name=wysiwyg>{WYSIWYG VAR [style] [name] [width] [height]}</a>
		<td>Выводит переменную (<i>VAR</i>) в окне WYSIWYG редактора.
			<br>Необязательный параметр <i>style</i> - может указывать на CSS файл, который должен использоваться для отображение содержимого. Поумолчанию styles.css.
			<br><i>name</i> - имя, по которому будет доступно содержимое после сабмита формы. Поумолчанию - VAR<sup>6</sup>.
			<br><i>Width</i> - ширина редактора в любых корректных величинах HTML для ширины. Поумолчанию - 520 пикселов.
			<br><i>Height</i> - Ширина редактора в любых корректных величинах HTML для ширины. Поумолчанию - 200 пикселов.
	<tr>
		<td colspan=2><hr>
	<tr>
		<th><a name=alt>{alt VAR [-]}</a>
			<br>&nbsp;&nbsp;{when[+] сравнение1}Инструкции1
			<br>&nbsp;&nbsp;...
			<br>&nbsp;&nbsp;{when[+] сравнениеN}ИнструкцииN
			<br>&nbsp;&nbsp;[{dflt}Инструкции поумолчанию.]
			<br>{/alt}
		<td>Реализация множественного выбора. (ALTernatives, Switch, Case)
			<br>Сравнивает любое выражение (см ниже) <i>VAR</i> последовательно, со всеми сравнениями во вложенных {when} или {when+}
			<br>Если VAR совпало с "СравнениеN", выполняются "ИнструкцииN", и <u>внимание</u>, проход немедленно завершается!
			<br>Если пройдя по всем {when[+]}, не найдено совпадений, то будут подставлены <i>инструкции поумолчанию</i>, если указаны в необязательном теге {dflt}
			<br>Необязательный параметр <i>"-"</i> в главном теге - Явно указывает что VAR не нужно никак интерпретировать, оно константа. Лучше указывать его, когда это заведомо так, для увеличения производительности. Может быть <u>любым</u>, лишь бы был!.
			<br><i>{when}</i> отличается от <i>{when+}</i> - Тем что в первом не производится никакой интерпретации сравниваемого выражения, ничего не вычисляется, переменные не подставляются. Он работает быстрее и в большинстве случаев вполне достаточен. Если его всеже недостаточно, используйте расширенную форму.
			<br>Если совпадения со всеми {when...} не найдены, и отсутствует {dflt}, блок просто будет вырезан - никаких варнингов и нотайсов не генерируется!
	<tr>
		<td colspan=2><hr>
	<tr>
		<th><a name=modules>{+moduleName[optional module parameters]}</a>
		<td>Подключение сторонних модулей. О создании и структуре модулей, подробнее можно прочитать <a href=template_modules.htm>здесь</a>.
			<br>Поиск файлов-модулей ведется методом <a href=template_man.htm#templateFind_path>find_path</a>. В качестве второго аргумента передается <a href=template_constants.htm#TEMPLATE_MODULES_SUBDIR>TEMPLATE_MODULES_SUBDIR</a>
			<br><i><u>Модули должны документироваться самостоятельно</u></i>.
<!--Сноски и комментарии -->
	<tr>
		<td colspan=2><hr><hr>
	<tr>
		<td colspan=2><sup>1</sup> - Здесь и далее VAR будем обозначать любую переменную, сопоставленную методом <a href=>assign</a>, а не конструкцию шаблонов. Может иметь произвольное значение.
	<tr>
		<td colspan=2><sup>2</sup> - Если данный тег не является вложенным в такойже, а находится наверху, то можно использовать короткую форму закрытия {/cycle}. Хотя полная всегда предпочтительнее с точки зрения читаемости кода.
	<tr>
		<td colspan=2><sup>3</sup> - <b>Внимание!</b> При использовании переменных, необходимо перед ее именем ставить знак доллара ($). Также <u>не допускается использование пробелов</u>. (Пример: {esli $AGE&gt;20}...)
	<tr>
		<td colspan=2><sup>4</sup> - Даже если инструкций в случае ЛОЖЬ не будет, наличие {else} <b>обязательно</b>!
	<tr>
		<td colspan=2><sup>5</sup> - Если данный тег не является вложенным, а находится наверху, то можно использовать короткую форму закрытия {/esli}. Хотя полная всегда предпочтительнее с точки зрения читаемости кода.
	<tr>
		<td colspan=2><sup>6</sup> - ВНИМАНИЕ, использовано буден НЕ значение переменной, а такое же имя элемента формы.
</table>
</body>
</html>